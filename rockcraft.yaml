name: canonicalwebteam-juju-logger
base: ubuntu@24.04
version: "0.1"
summary: A Flask application to log Juju model data.
description: |
  This charm deploys a Flask application that collects and logs data from Juju models using the Juju Python client library.
  It connects to the Juju controller, retrieves information about the current model and applications, and logs this data for analysis and monitoring purposes.
platforms:
  amd64:
package-repositories:
  - type: apt
    url: https://apt.grafana.com
    key-id: B53AE77BADB630A683046005963FA27710458545
    suites:
      - stable
    components:
      - main
extensions:
  - fastapi-framework
parts:
  fastapi-framework/install-app:
    prime:
      - app/.env
      - app/app.py
      - app/src
  alloy:
    plugin: nil
    stage-packages:
      - alloy
services:
  alloy-worker:
    override: replace
    command: alloy run config.alloy
    startup: enabled
    user: _daemon_
    working-dir: /flask/app